function Invoice(){self=this}!function(t){"use strict";t.opt={},jQuery.fn.invoice=function(e){var r=jQuery.extend({},jQuery.fn.invoice.defaults,e);t.opt=r;var a=new Invoice;return a.init(),jQuery("body").on("click",function(e){var r=e.target.id||e.target.className;r==t.opt.addRow.substring(1)&&a.newRow(),r==t.opt.delete.substring(1)&&a.deleteRow(e.target),a.init()}),jQuery("body").on("keyup",function(t){a.init()}),this}}(jQuery),Invoice.prototype={constructor:Invoice,init:function(){this.calcTotal(),this.calcTotalQty(),this.calcSubtotal(),this.calcGrandTotal()},calcTotal:function(){return jQuery($.opt.parentClass).each(function(t){var e=jQuery(this),r=e.find($.opt.price).val()*e.find($.opt.qty).val();r=self.roundNumber(r,2),e.find($.opt.total).html(r),e.find($.opt.total).val(r)}),1},calcTotalQty:function(){var t=0;return jQuery($.opt.qty).each(function(e){var r=jQuery(this).val();isNaN(r)||(t+=Number(r))}),t=self.roundNumber(t,2),jQuery($.opt.totalQty).html(t),1},calcSubtotal:function(){var t=0;return jQuery($.opt.total).each(function(e){var r=jQuery(this).html();isNaN(r)||(t+=Number(r))}),t=self.roundNumber(t,2),jQuery($.opt.subtotal).html(t),jQuery(".subtotal").val(t),1},calcGrandTotal:function(){var t=Number(jQuery($.opt.tax).val())+Number(jQuery($.opt.discount).val()),e=Number(jQuery($.opt.subtotal).html())-Number(jQuery($.opt.subtotal).html())*(Number(t)/100);return e=self.roundNumber(e,2),jQuery($.opt.grandTotal).html(e),jQuery(".grandtotal").val(e),1},newRow:function(){return jQuery(".item-row:last").after('<tr class="item-row"><td class="item-name"><input type="text" name="items[]" class="form-control item" placeholder="Item" type="text"></td><td><input class="form-control price invo" name="price[]" placeholder="Price" type="text"> </td><td><input class="form-control qty" name="quantity[]" placeholder="Quantity" type="text"></td><td><div class="delete-btn"><span class="currency_wrapper"></span><span class="total">0.00</span><a class="delete" href="javascript:;" title="Remove row">&times;</a><input type="hidden" class="total" name="total_price[]" value=""></div></td></tr>'),jQuery($.opt.delete).length>0&&jQuery($.opt.delete).show(),1},deleteRow:function(t){return jQuery(t).parents($.opt.parentClass).remove(),jQuery($.opt.delete).length<2&&jQuery($.opt.delete).hide(),1},roundNumber:function(t,e){var r;if((e=Number(e))<1)r=Math.round(t).toString();else{var a=t.toString();-1==a.lastIndexOf(".")&&(a+=".");var n=a.lastIndexOf(".")+e,o=Number(a.substring(n,n+1));if(Number(a.substring(n+1,n+2))>=5){if(9==o&&n>0)for(;n>0&&(9==o||isNaN(o));)"."!=o?(n-=1,o=Number(a.substring(n,n+1))):n-=1;o+=1}if(10==o)a=a.substring(0,a.lastIndexOf(".")),r=(Number(a)+1).toString()+".";else r=a.substring(0,n)+o.toString()}-1==r.lastIndexOf(".")&&(r+=".");for(var l=r.substring(r.lastIndexOf(".")+1).length,u=0;u<e-l;u++)r+="0";return r}},jQuery.fn.invoice.defaults={addRow:"#addRow",delete:".delete",parentClass:".item-row",price:".price",qty:".qty",total:".total",totalQty:"#totalQty",subtotal:"#subtotal",discount:"#discount",tax:"#tax",shipping:"#shipping",grandTotal:"#grandTotal"};